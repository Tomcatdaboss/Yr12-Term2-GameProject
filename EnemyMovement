using System;
using System.Collections;
using System.Collections.Generic;
using System.Data.SqlTypes;
using UnityEngine;

public class EnemyMovement : MonoBehaviour
{
    public Transform player;
    public float timeDelay;
    private bool already_attacked = false;
    Animator animator;

    // Start is called before the first frame update
    void Start()
    {
        animator = gameObject.GetComponent<Animator>();
    }

    // Update is called once per frame
    void Update()
    {

    }
    void OnCollisionStay(Collision collision){
        if (collision.gameObject.tag == "Player"){
            if(animator.GetCurrentAnimatorStateInfo(0).IsName("EnemyAttack") && already_attacked == false){
            player.GetComponent<Hud>().health -= 10;
            already_attacked = true;
        } else if (animator.GetCurrentAnimatorStateInfo(0).IsName("EnemyIdle")){
            already_attacked = false;
        }
        }  
    }
    void OnTriggerStay(Collider collider){
        if(collider.gameObject.tag == "Player"){
            // face the target
		transform.LookAt(player);

		//get the distance between the chaser and the target
		float distance = Vector3.Distance(transform.position,player.position);

		//so long as the chaser is farther away than the minimum distance, move towards it at rate speed.
		if(distance > 1)	
			transform.position += transform.forward * 10 * Time.deltaTime;	
        }
    }
}  

